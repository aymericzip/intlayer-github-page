{
  "id": "./docs/en/bundle_optimization.md",
  "content": "---\ncreatedAt: 2025-11-25\nupdatedAt: 2025-11-25\ntitle: Optimizing i18n Bundle Size & Performance\ndescription: Reduce application bundle size by optimizing internationalization (i18n) content. Learn how to leverage tree shaking and lazy loading for dictionaries with Intlayer.\nkeywords:\n  - Bundle Optimization\n  - Content Automation\n  - Dynamic Content\n  - Intlayer\n  - Next.js\n  - JavaScript\n  - React\nslugs:\n  - doc\n  - concept\n  - bundle-optimization\nhistory:\n  - version: 6.0.0\n    date: 2025-11-25\n    changes: Init history\n---\n\n# Optimizing i18n Bundle Size & Performance\n\nOne of the most common challenges with traditional i18n solutions relying on JSON files is managing content size. If developers do not manually separate content into namespaces, users often end up downloading translations for every page and potentially every language just to view a single page.\n\nFor example, an application with 10 pages translated into 10 languages might result in a user downloading the content of 100 pages, even though they only need **one** (the current page in the current language). This leads to wasted bandwidth and slower load times.\n\n> To detect it, you can use bundle analyzer like `rollup-plugin-visualizer` (vite), `@next/bundle-analyzer` (next.js), or `webpack-bundle-analyzer` (React CRA / Angular / etc).\n\n**Intlayer solves this problem through build-time optimization.** It analyzes your code to detect which dictionaries are actually used per component and reinjects only the necessary content into your bundle.\n\n## Table of Contents\n\n<TOC />\n\n## How It Works\n\nIntlayer uses a **per-component approach**. Unlike global JSON files, your content is defined alongside or within your components. During the build process, Intlayer:\n\n1.  **Analyzes** your code to find `useIntlayer` calls.\n2.  **Builds** the corresponding dictionary content.\n3.  **Replaces** the `useIntlayer` call with optimized code based on your configuration.\n\nThis ensures that:\n\n- If a component is not imported, its content is not included in the bundle (Dead Code Elimination).\n- If a component is lazy-loaded, its content is also lazy-loaded.\n\n## Setup by Platform\n\n### Next.js\n\nNext.js requires the `@intlayer/swc` plugin to handle the transformation, as Next.js uses SWC for builds.\n\n> This plugin is installed by default because SWC plugins are still experimental for Next.js. It may change in the future.\n\n### Vite\n\nVite uses `@intlayer/babel` plugin which is included as dependency of `vite-intlayer`. The optimization is enabled by default.\n\n### Webpack\n\nTo enable bundle optimization with Intlayer on Webpack, you need to install and configure the appropriate Babel (`@intlayer/babel`) or SWC (`@intlayer/swc`) plugin.\n\n### Expo / Lynx\n\nBundle optimization is **not available yet** for this platform. Support will be added in a future release.\n\n## Configuration\n\nYou can control how Intlayer optimizes your bundle via the `build` property in your `intlayer.config.ts`.\n\n```typescript fileName=\"intlayer.config.ts\"\nimport { Locales, type IntlayerConfig } from \"intlayer\";\n\nconst config: IntlayerConfig = {\n  internationalization: {\n    locales: [Locales.ENGLISH, Locales.FRENCH],\n    defaultLocale: Locales.ENGLISH,\n  },\n  dictionary: {\n    importMode: \"static\", // or 'dynamic'\n  },\n  build: {\n    optimize: true,\n    traversePattern: [\"**/*.{js,ts,mjs,cjs,jsx,tsx}\", \"!**/node_modules/**\"],\n  },\n};\n\nexport default config;\n```\n\n> Keeping the default option for `optimize` is recommended in the most majority of cases.\n\n> See doc configuration for more details: [Configuration](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/configuration.md)\n\n### Build Options\n\nThe following options are available under the `build` configuration object:\n\n| Property              | Type                             | Default                         | Description                                                                                                                                                                                      |\n| :-------------------- | :------------------------------- | :------------------------------ | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **`optimize`**        | `boolean`                        | `undefined`                     | Controls whether build optimization is enabled. If `true`, Intlayer replaces dictionary calls with optimized injects. If `false`, optimization is disabled. Ideally set to `true` in production. |\n| **`importMode`**      | `'static' , 'dynamic' , 'fetch'` | `'static'`                      | **Deprecated**: Use `dictionary.importMode` instead. Determines how dictionaries are loaded (see details below).                                                                                 |\n| **`traversePattern`** | `string[]`                       | `['**/*.{js,ts,jsx,tsx}', ...]` | Glob patterns defining which files Intlayer should scan for optimization. Use this to exclude unrelated files and speed up builds.                                                               |\n| **`outputFormat`**    | `'esm', 'cjs'`                   | `'esm', 'cjs'`                  | Controls the output format of the built dictionaries.                                                                                                                                            |\n\n## Import Modes\n\nThe `importMode` setting dictates how the dictionary content is injected into your component.\n\n### 1. Static Mode (`default`)\n\nIn static mode, Intlayer replaces `useIntlayer` with `useDictionary` and injects the dictionary directly into the JavaScript bundle.\n\n- **Pros:** Instant rendering (synchronous), zero extra network requests during hydration.\n- **Cons:** The bundle includes translations for **all** available languages for that specific component.\n- **Best for:** Single Page Applications (SPA).\n\n**Transformed Code Example:**\n\n```tsx\n// Your code\nconst content = useIntlayer(\"my-key\");\n\n// Optimized code (Static)\nconst content = useDictionary({\n  key: \"my-key\",\n  content: {\n    nodeType: \"translation\",\n    translation: {\n      en: \"My title\",\n      fr: \"Mon titre\",\n    },\n  },\n});\n```\n\n### 2. Dynamic Mode\n\nIn dynamic mode, Intlayer replaces `useIntlayer` with `useDictionaryAsync`. This uses `import()` (Suspense-like mechanism) to lazy-load specifically the JSON for the current locale.\n\n- **Pros:** **Locale-level tree shaking.** A user viewing the English version will _only_ download the English dictionary. The French dictionary is never loaded.\n- **Cons:** Triggers a network request (asset fetch) per component during hydration.\n- **Best for:** Large text blocks, articles, or applications supporting many languages where bundle size is critical.\n\n**Transformed Code Example:**\n\n```tsx\n// Your code\nconst content = useIntlayer(\"my-key\");\n\n// Optimized code (Dynamic)\nconst content = useDictionaryAsync({\n  en: () =>\n    import(\".intlayer/dynamic_dictionary/my-key/en.json\").then(\n      (mod) => mod.default\n    ),\n  fr: () =>\n    import(\".intlayer/dynamic_dictionary/my-key/fr.json\").then(\n      (mod) => mod.default\n    ),\n});\n```\n\n> When using `importMode: 'dynamic'`, if you have 100 components using `useIntlayer` on a single page, the browser will attempt 100 separate fetches. To avoid this \"waterfall\" of requests, group content into fewer `.content` files (e.g., one dictionary per page section) rather than one per atom component.\n\n> Currently, `importMode: 'dynamic'` is not fully supported for Vue and Svelte. It is recommended to use `importMode: 'static'` for these frameworks until further updates.\n\n### 3. Live Mode\n\nBehaves similarly to Dynamic mode but attempts to fetch dictionaries from the Intlayer Live Sync API first. If the API call fails or the content is not marked for live updates, it falls back to the dynamic import.\n\n> See CMS documentation for more details: [CMS](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_CMS.md)\n\n## Summary: Static vs Dynamic\n\n| Feature              | Static Mode                                   | Dynamic Mode                         |\n| :------------------- | :-------------------------------------------- | :----------------------------------- |\n| **JS Bundle Size**   | Larger (includes all langs for the component) | Smallest (only code, no content)     |\n| **Initial Load**     | Instant (Content is in bundle)                | Slight delay (Fetches JSON)          |\n| **Network Requests** | 0 extra requests                              | 1 request per dictionary             |\n| **Tree Shaking**     | Component-level                               | Component-level + Locale-level       |\n| **Best Use Case**    | UI Components, Small Apps                     | Pages with much text, Many Languages |\n",
  "createdAt": "2025-11-25",
  "updatedAt": "2025-11-25",
  "title": "Optimizing i18n Bundle Size & Performance",
  "description": "Reduce application bundle size by optimizing internationalization (i18n) content. Learn how to leverage tree shaking and lazy loading for dictionaries with Intlayer.",
  "keywords": [
    "Bundle Optimization",
    "Content Automation",
    "Dynamic Content",
    "Intlayer",
    "Next.js",
    "JavaScript",
    "React"
  ],
  "slugs": [
    "doc",
    "concept",
    "bundle-optimization"
  ],
  "history": [
    {
      "version": "6.0.0",
      "date": "2025-11-25",
      "changes": "Init history"
    }
  ],
  "docKey": "./docs/en/bundle_optimization.md",
  "githubUrl": "https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/bundle_optimization.md",
  "relativeUrl": "/doc/concept/bundle-optimization",
  "url": "https://intlayer.org/doc/concept/bundle-optimization"
}