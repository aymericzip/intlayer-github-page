{
  "id": "./docs/en/intlayer_with_nextjs_14.md",
  "content": "---\ncreatedAt: 2024-12-06\nupdatedAt: 2025-12-30\ntitle: Next.js i18n - How to translate your Next.js 14 app – guide 2026\ndescription: Discover how to make your Next.js 14 App Router website multilingual. Follow the documentation to internationalize (i18n) and translate it.\nkeywords:\n  - Internationalization\n  - Documentation\n  - Intlayer\n  - Next.js 14\n  - JavaScript\n  - React\nslugs:\n  - doc\n  - environment\n  - nextjs\n  - 14\napplicationTemplate: https://github.com/aymericzip/intlayer-next-14-template\nhistory:\n  - version: 7.5.9\n    date: 2025-12-30\n    changes: Add init command\n  - version: 6.2.0\n    date: 2025-10-09\n    changes: Added docs for `useLocale` hook with `onLocaleChange` option\n  - version: 5.6.6\n    date: 2025-10-02\n    changes: Added docs for `getLocale` function on server actions\n  - version: 5.6.2\n    date: 2025-09-22\n    changes: Added docs for `multipleMiddlewares` helper\n  - version: 5.6.0\n    date: 2025-07-06\n    changes: Transform `withIntlayer()` function to a promise based function\n  - version: 5.5.10\n    date: 2025-06-29\n    changes: Init history\n---\n\n# Translate your Next.js 14 and App Router website using Intlayer | Internationalization (i18n)\n\n## Table of Contents\n\n<TOC/>\n\n## What is Intlayer?\n\n**Intlayer** is an innovative, open-source internationalization (i18n) library designed to simplify multilingual support in modern web applications. Intlayer seamlessly integrates with the latest **Next.js 14** framework, including its powerful **App Router**. It is optimized to work with **Server Components** for efficient rendering and is fully compatible with [**Turbopack**](https://nextjs.org/docs/architecture/turbopack) (from Next.js >= 15).\n\nWith Intlayer, you can:\n\n- **Easily manage translations** using declarative dictionaries at the component level.\n- **Dynamically localize metadata**, routes, and content.\n- **Access translations in both client-side and server-side components**.\n- **Ensure TypeScript support** with autogenerated types, improving autocompletion and error detection.\n- **Benefit from advanced features**, like dynamic locale detection and switching.\n\n> Intlayer is compatible with Next.js 12, 13, 14, and 15. If you are using Next.js Page Router, you can refer to this [guide](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_with_nextjs_page_router.md). For Next.js 15 with or without turbopack, refer to this [guide](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_with_nextjs_15.md).\n\n---\n\n## Step-by-Step Guide to Set Up Intlayer in a Next.js Application\n\n<iframe\n  src=\"https://stackblitz.com/github/aymericzip/intlayer-next-14-template?embed=1&ctl=1&file=intlayer.config.ts\"\n  className=\"m-auto overflow-hidden rounded-lg border-0 max-md:size-full max-md:h-[700px] md:aspect-16/9 md:w-full\"\n  title=\"Demo CodeSandbox - How to Internationalize your application using Intlayer\"\n  sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n  loading=\"lazy\"\n/>\n\nSee [Application Template](https://github.com/aymericzip/intlayer-next-14-template) on GitHub.\n\n### Step 1: Install Dependencies\n\nInstall the necessary packages using npm:\n\n```bash packageManager=\"npm\"\nnpm install intlayer next-intlayer\nnpx intlayer init\n```\n\n```bash packageManager=\"pnpm\"\npnpm add intlayer next-intlayer\npnpm intlayer init\n```\n\n```bash packageManager=\"yarn\"\nyarn add intlayer next-intlayer\nyarn intlayer init\n```\n\n```bash packageManager=\"bun\"\nbun add intlayer next-intlayer\nbunx intlayer init\n```\n\n- **intlayer**\n\n  The core package that provides internationalization tools for configuration management, translation, [content declaration](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/dictionary/content_file.md), transpilation, and [CLI commands](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/cli/index.md).\n\n- **next-intlayer**\n\n  The package that integrates Intlayer with Next.js. It provides context providers and hooks for Next.js internationalization. Additionally, it includes the Next.js plugin for integrating Intlayer with [Webpack](https://webpack.js.org/) or [Turbopack](https://nextjs.org/docs/app/api-reference/turbopack), as well as middleware for detecting the user's preferred locale, managing cookies, and handling URL redirection.\n\n### Step 2: Configure Your Project\n\nHere is the final structure that we will make:\n\n```bash\n.\n├── src\n│   ├── app\n│   │   ├── [locale]\n│   │   │   ├── layout.tsx            # Locale layout for the Intlayer provider\n│   │   │   ├── page.content.ts\n│   │   │   └── page.tsx\n│   │   └── layout.tsx                # Root layout for style and global providers\n│   ├── components\n│   │   ├── client-component-example.content.ts\n│   │   ├── ClientComponentExample.tsx\n│   │   ├── LocaleSwitcher\n│   │   │   ├── localeSwitcher.content.ts\n│   │   │   └── LocaleSwitcher.tsx\n│   │   ├── server-component-example.content.ts\n│   │   └── ServerComponentExample.tsx\n│   └── middleware.ts\n├── intlayer.config.ts\n├── next.config.ts\n├── package.json\n└── tsconfig.json\n```\n\n> If you don't want locale routing, intlayer can be used as a simple provider / hook. See [this guide](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_with_nextjs_no_locale_path.md) for more details.\n\nCreate a config file to configure the languages of your application:\n\n```typescript fileName=\"intlayer.config.ts\" codeFormat=\"typescript\"\nimport { Locales, type IntlayerConfig } from \"intlayer\";\n\nconst config: IntlayerConfig = {\n  internationalization: {\n    locales: [\n      Locales.ENGLISH,\n      Locales.FRENCH,\n      Locales.SPANISH,\n      // Your other locales\n    ],\n    defaultLocale: Locales.ENGLISH,\n  },\n};\n\nexport default config;\n```\n\n```javascript fileName=\"intlayer.config.mjs\" codeFormat=\"esm\"\nimport { Locales } from \"intlayer\";\n\n/** @type {import('intlayer').IntlayerConfig} */\nconst config = {\n  internationalization: {\n    locales: [\n      Locales.ENGLISH,\n      Locales.FRENCH,\n      Locales.SPANISH,\n      // Your other locales\n    ],\n    defaultLocale: Locales.ENGLISH,\n  },\n};\n\nexport default config;\n```\n\n```javascript fileName=\"intlayer.config.cjs\" codeFormat=\"commonjs\"\nconst { Locales } = require(\"intlayer\");\n\n/** @type {import('intlayer').IntlayerConfig} */\nconst config = {\n  internationalization: {\n    locales: [\n      Locales.ENGLISH,\n      Locales.FRENCH,\n      Locales.SPANISH,\n      // Your other locales\n    ],\n    defaultLocale: Locales.ENGLISH,\n  },\n};\n\nmodule.exports = config;\n```\n\n> Through this configuration file, you can set up localized URLs, middleware redirection, cookie names, the location and extension of your content declarations, disable Intlayer logs in the console, and more. For a complete list of available parameters, refer to the [configuration documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/configuration.md).\n\n### Step 3: Integrate Intlayer in Your Next.js Configuration\n\nConfigure your Next.js setup to use Intlayer:\n\n```typescript fileName=\"next.config.mjs\"\nimport { withIntlayer } from \"next-intlayer/server\";\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {};\n\nexport default withIntlayer(nextConfig);\n```\n\n> The `withIntlayer()` Next.js plugin is used to integrate Intlayer with Next.js. It ensures the building of content declaration files and monitors them in development mode. It defines Intlayer environment variables within the [Webpack](https://webpack.js.org/) or [Turbopack](https://nextjs.org/docs/app/api-reference/turbopack) environments. Additionally, it provides aliases to optimize performance and ensures compatibility with server components.\n\n> The `withIntlayer()` function is a promise function. If you want to use it with other plugins, you can await it. Example:\n>\n> ```tsx\n> const nextConfig = await withIntlayer(nextConfig);\n> const nextConfigWithOtherPlugins = withOtherPlugins(nextConfig);\n>\n> export default nextConfigWithOtherPlugins;\n> ```\n\n### Step 4: Configure Middleware for Locale Detection\n\nSet up middleware to detect the user's preferred locale:\n\n```typescript fileName=\"src/middleware.ts\" codeFormat=\"typescript\"\nexport { intlayerMiddleware as middleware } from \"next-intlayer/middleware\";\n\nexport const config = {\n  matcher:\n    \"/((?!api|static|assets|robots|sitemap|sw|service-worker|manifest|.*\\\\..*|_next).*)\",\n};\n```\n\n```javascript fileName=\"src/middleware.mjs\" codeFormat=\"esm\"\nexport { intlayerMiddleware as middleware } from \"next-intlayer/middleware\";\n\nexport const config = {\n  matcher:\n    \"/((?!api|static|assets|robots|sitemap|sw|service-worker|manifest|.*\\\\..*|_next).*)\",\n};\n```\n\n```javascript fileName=\"src/middleware.cjs\" codeFormat=\"commonjs\"\nconst { intlayerMiddleware } = require(\"next-intlayer/middleware\");\n\nconst config = {\n  matcher:\n    \"/((?!api|static|assets|robots|sitemap|sw|service-worker|manifest|.*\\\\..*|_next).*)\",\n};\n\nmodule.exports = { middleware: intlayerMiddleware, config };\n```\n\n> The `intlayerMiddleware` is used to detect the user's preferred locale and redirect them to the appropriate URL as specified in the [configuration](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/configuration.md). Additionally, it enables saving the user's preferred locale in a cookie.\n\n> Adapt the `matcher` parameter to match the routes of your application. For more details, refer to the [Next.js documentation on configuring the matcher](https://nextjs.org/docs/app/building-your-application/routing/middleware).\n\n> If you need to chain several middlewares together (for example, `intlayerMiddleware` with authentication or custom middlewares), Intlayer now provides a helper called `multipleMiddlewares`.\n\n```ts\nimport {\n  multipleMiddlewares,\n  intlayerMiddleware,\n} from \"next-intlayer/middleware\";\nimport { customMiddleware } from \"@utils/customMiddleware\";\n\nexport const middleware = multipleMiddlewares([\n  intlayerMiddleware,\n  customMiddleware,\n]);\n```\n\n### Step 5: Define Dynamic Locale Routes\n\nRemove everything from `RootLayout` and replace it with the following code:\n\n```tsx fileName=\"src/app/layout.tsx\" codeFormat=\"typescript\"\nimport type { PropsWithChildren, FC } from \"react\";\nimport \"./globals.css\";\n\nconst RootLayout: FC<PropsWithChildren> = ({ children }) => (\n  // You can still wrap the children with other providers, Like `next-themes`, `react-query`, `framer-motion`, etc.\n  <>{children}</>\n);\n\nexport default RootLayout;\n```\n\n```jsx fileName=\"src/app/layout.mjx\" codeFormat=\"esm\"\nimport \"./globals.css\";\n\nconst RootLayout = ({ children }) => (\n  // You can still wrap the children with other providers, Like `next-themes`, `react-query`, `framer-motion`, etc.\n  <>{children}</>\n);\n\nexport default RootLayout;\n```\n\n```jsx fileName=\"src/app/layout.csx\" codeFormat=\"commonjs\"\nrequire(\"./globals.css\");\n\nconst RootLayout = ({ children }) => (\n  // You can still wrap the children with other providers, Like `next-themes`, `react-query`, `framer-motion`, etc.\n  <>{children}</>\n);\n\nmodule.exports = {\n  default: RootLayout,\n  generateStaticParams,\n};\n```\n\n> Keeping the `RootLayout` component empty allows to set the [`lang`](https://developer.mozilla.org/fr/docs/Web/HTML/Global_attributes/lang) and [`dir`](https://developer.mozilla.org/fr/docs/Web/HTML/Global_attributes/dir) attributes to the `<html>` tag.\n\nTo implement dynamic routing, provide the path for the locale by adding a new layout in your `[locale]` directory:\n\n```tsx fileName=\"src/app/[locale]/layout.tsx\" codeFormat=\"typescript\"\nimport type { Next14LayoutIntlayer } from \"next-intlayer\";\nimport { Inter } from \"next/font/google\";\nimport { getHTMLTextDir } from \"intlayer\";\n\nconst inter = Inter({ subsets: [\"latin\"] });\n\nconst LocaleLayout: Next14LayoutIntlayer = ({\n  children,\n  params: { locale },\n}) => (\n  <html lang={locale} dir={getHTMLTextDir(locale)}>\n    <body className={inter.className}>{children}</body>\n  </html>\n);\n\nexport default LocaleLayout;\n```\n\n```jsx fileName=\"src/app/[locale]/layout.mjx\" codeFormat=\"esm\"\nimport { Inter } from \"next/font/google\";\nimport { getHTMLTextDir } from \"intlayer\";\n\nconst inter = Inter({ subsets: [\"latin\"] });\n\nconst LocaleLayout = ({ children, params: { locale } }) => (\n  <html lang={locale} dir={getHTMLTextDir(locale)}>\n    <body className={inter.className}>{children}</body>\n  </html>\n);\n\nexport default LocaleLayout;\n```\n\n```jsx fileName=\"src/app/[locale]/layout.csx\" codeFormat=\"commonjs\"\nconst { Inter } = require(\"next/font/google\");\nconst { getHTMLTextDir } = require(\"intlayer\");\n\nconst inter = Inter({ subsets: [\"latin\"] });\n\nconst LocaleLayout = ({ children, params: { locale } }) => (\n  <html lang={locale} dir={getHTMLTextDir(locale)}>\n    <body className={inter.className}>{children}</body>\n  </html>\n);\n\nmodule.exports = LocaleLayout;\n```\n\n> The `[locale]` path segment is used to define the locale. Example: `/en-US/about` will refer to `en-US` and `/fr/about` to `fr`.\n\n> At this stage, you will encounter the error: `Error: Missing <html> and <body> tags in the root layout.`. This is expected because the `/app/page.tsx` file is no longer in use and can be removed. Instead, the `[locale]` path segment will activate the `/app/[locale]/page.tsx` page. Consequently, pages will be accessible via paths like `/en`, `/fr`, `/es` in your browser. To set the default locale as the root page, refer to the `middleware` setup in step 4.\n\nThen, implement the `generateStaticParams` function in your application Layout.\n\n```tsx {1} fileName=\"src/app/[locale]/layout.tsx\" codeFormat=\"typescript\"\nexport { generateStaticParams } from \"next-intlayer\"; // Line to insert\n\nconst LocaleLayout: Next14LayoutIntlayer = ({\n  children,\n  params: { locale },\n}) => {\n  /*... Rest of the code*/\n};\n\nexport default LocaleLayout;\n```\n\n```jsx {1} fileName=\"src/app/[locale]/layout.mjx\" codeFormat=\"esm\"\nexport { generateStaticParams } from \"next-intlayer\"; // Line to insert\n\nconst LocaleLayout = ({ children, params: { locale } }) => {\n  /*... Rest of the code*/\n};\n\nexport default LocaleLayout;\n```\n\n```jsx {1,7} fileName=\"src/app/[locale]/layout.csx\" codeFormat=\"commonjs\"\nconst { generateStaticParams } = require(\"next-intlayer\"); // Line to insert\n\nconst LocaleLayout = ({ children, params: { locale } }) => {\n  /*... Rest of the code*/\n};\n\nmodule.exports = LocaleLayout;\n```\n\n> `generateStaticParams` ensures that your application pre-builds the necessary pages for all locales, reducing runtime computation and improving the user experience. For more details, refer to the [Next.js documentation on generateStaticParams](https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic-rendering#generate-static-params).\n\n### Step 6: Declare Your Content\n\nCreate and manage your content declarations to store translations:\n\n```typescript fileName=\"src/app/[locale]/page.content.ts\" contentDeclarationFormat=\"typescript\"\nimport { t, type Dictionary } from \"intlayer\";\n\nconst pageContent = {\n  key: \"page\",\n  content: {\n    getStarted: {\n      main: t({\n        en: \"Get started by editing\",\n        fr: \"Commencez par éditer\",\n        es: \"Comience por editar\",\n      }),\n      pageLink: \"src/app/page.tsx\",\n    },\n  },\n} satisfies Dictionary;\n\nexport default pageContent;\n```\n\n```javascript fileName=\"src/app/[locale]/page.content.mjs\" contentDeclarationFormat=\"esm\"\nimport { t } from \"intlayer\";\n\n/** @type {import('intlayer').Dictionary} */\nconst pageContent = {\n  key: \"page\",\n  content: {\n    getStarted: {\n      main: t({\n        en: \"Get started by editing\",\n        fr: \"Commencez par éditer\",\n        es: \"Comience por editar\",\n      }),\n      pageLink: \"src/app/page.tsx\",\n    },\n  },\n};\n\nexport default pageContent;\n```\n\n```javascript fileName=\"src/app/[locale]/page.content.cjs\" contentDeclarationFormat=\"commonjs\"\nconst { t } = require(\"intlayer\");\n\n/** @type {import('intlayer').Dictionary} */\nconst pageContent = {\n  key: \"page\",\n  content: {\n    getStarted: {\n      main: t({\n        en: \"Get started by editing\",\n        fr: \"Commencez par éditer\",\n        es: \"Comience por editar\",\n      }),\n      pageLink: \"src/app/page.tsx\",\n    },\n  },\n};\n\nmodule.exports = pageContent;\n```\n\n```json fileName=\"src/app/[locale]/page.content.json\" contentDeclarationFormat=\"json\"\n{\n  \"$schema\": \"https://intlayer.org/schema.json\",\n  \"key\": \"page\",\n  \"content\": {\n    \"getStarted\": {\n      \"nodeType\": \"translation\",\n      \"translation\": {\n        \"en\": \"Get started by editing\",\n        \"fr\": \"Commencez par éditer\",\n        \"es\": \"Comience por editar\"\n      }\n    },\n    \"pageLink\": {\n      \"nodeType\": \"translation\",\n      \"translation\": {\n        \"en\": \"src/app/page.tsx\",\n        \"fr\": \"src/app/page.tsx\",\n        \"es\": \"src/app/page.tsx\"\n      }\n    }\n  }\n}\n```\n\n> Your content declarations can be defined anywhere in your application as soon they are included into the `contentDir` directory (by default, `./src`). And match the content declaration file extension (by default, `.content.{json,ts,tsx,js,jsx,mjs,cjs}`).\n\n> For more details, refer to the [content declaration documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/dictionary/content_file.md).\n\n### Step 7: Utilize Content in Your Code\n\nAccess your content dictionaries throughout your application:\n\n```tsx fileName=\"src/app/[locale]/page.tsx\" codeFormat=\"typescript\"\nimport { ClientComponentExample } from \"@components/ClientComponentExample\";\nimport { ServerComponentExample } from \"@components/ServerComponentExample\";\nimport { type Next14PageIntlayer, IntlayerClientProvider } from \"next-intlayer\";\nimport { IntlayerServerProvider, useIntlayer } from \"next-intlayer/server\";\n\nconst Page: Next14PageIntlayer = ({ params: { locale } }) => {\n  const content = useIntlayer(\"page\", locale);\n\n  return (\n    <>\n      <p>\n        {content.getStarted.main}\n        <code>{content.getStarted.pageLink}</code>\n      </p>\n\n      <IntlayerServerProvider locale={locale}>\n        <IntlayerClientProvider locale={locale}>\n          <ServerComponentExample />\n          <ClientComponentExample />\n        </IntlayerClientProvider>\n      </IntlayerServerProvider>\n    </>\n  );\n};\n\nexport default Page;\n```\n\n```jsx fileName=\"src/app/[locale]/page.mjx\" codeFormat=\"esm\"\nimport { ClientComponentExample } from \"@components/ClientComponentExample\";\nimport { ServerComponentExample } from \"@components/ServerComponentExample\";\nimport { IntlayerClientProvider } from \"next-intlayer\";\nimport { IntlayerServerProvider, useIntlayer } from \"next-intlayer/server\";\n\nconst Page = ({ params: { locale } }) => {\n  const content = useIntlayer(\"page\", locale);\n\n  return (\n    <>\n      <p>\n        {content.getStarted.main}\n        <code>{content.getStarted.pageLink}</code>\n      </p>\n\n      <IntlayerClientProvider locale={locale}>\n        <IntlayerServerProvider locale={locale}>\n          <ClientComponentExample />\n          <ServerComponentExample />\n        </IntlayerServerProvider>\n      </IntlayerClientProvider>\n    </>\n  );\n};\n```\n\n```jsx fileName=\"src/app/[locale]/page.csx\" codeFormat=\"commonjs\"\nconst { IntlayerClientProvider } = require(\"next-intlayer\");\nconst { IntlayerServerProvider, useIntlayer } = require(\"next-intlayer/server\");\n\nconst Page = ({ params: { locale } }) => {\n  const content = useIntlayer(\"page\", locale);\n\n  return (\n    <>\n      <p>\n        {content.getStarted.main}\n        <code>{content.getStarted.pageLink}</code>\n      </p>\n\n      <IntlayerClientProvider locale={locale}>\n        <IntlayerServerProvider locale={locale}>\n          <ClientComponentExample />\n          <ServerComponentExample />\n        </IntlayerServerProvider>\n      </IntlayerClientProvider>\n    </>\n  );\n};\n```\n\n- **`IntlayerClientProvider`** is used to provide the locale to client-side components. It can be placed in any parent component, including the layout. However, placing it in a layout is recommended because Next.js shares layout code across pages, making it more efficient. By using `IntlayerClientProvider` in the layout, you avoid reinitializing it for every page, improving performance and maintaining a consistent localization context throughout your application.\n- **`IntlayerServerProvider`** is used to provide the locale to the server children. It cannot be set set in the layout.\n\n  > Layout and page cannot share a common server context because the server context system is based on a per-request data store (via [React’s cache](https://react.dev/reference/react/cache) mechanism), causing each “context” to be re-created for different segments of the application. Placing the provider in a shared layout would break this isolation, preventing the correct propagation of the server context values to your server components.\n\n```tsx {4,7} fileName=\"src/components/ClientComponentExample.tsx\" codeFormat=\"typescript\"\n\"use client\";\n\nimport type { FC } from \"react\";\nimport { useIntlayer } from \"next-intlayer\";\n\nconst ClientComponentExample: FC = () => {\n  const content = useIntlayer(\"client-component-example\"); // Create related content declaration\n\n  return (\n    <div>\n      <h2>{content.title}</h2>\n      <p>{content.content}</p>\n    </div>\n  );\n};\n```\n\n```jsx {3,6} fileName=\"src/components/ClientComponentExample.mjx\" codeFormat=\"esm\"\n\"use client\";\n\nimport { useIntlayer } from \"next-intlayer\";\n\nconst ClientComponentExample = () => {\n  const content = useIntlayer(\"client-component-example\"); // Create related content declaration\n\n  return (\n    <div>\n      <h2>{content.title}</h2>\n      <p>{content.content}</p>\n    </div>\n  );\n};\n```\n\n```jsx {3,6} fileName=\"src/components/ClientComponentExample.csx\" codeFormat=\"commonjs\"\n\"use client\";\n\nconst { useIntlayer } = require(\"next-intlayer\");\n\nconst ClientComponentExample = () => {\n  const content = useIntlayer(\"client-component-example\"); // Create related content declaration\n\n  return (\n    <div>\n      <h2>{content.title}</h2>\n      <p>{content.content}</p>\n    </div>\n  );\n};\n```\n\n```tsx {2} fileName=\"src/components/ServerComponentExample.tsx\" codeFormat=\"typescript\"\nimport type { FC } from \"react\";\nimport { useIntlayer } from \"next-intlayer/server\";\n\nconst ServerComponentExample: FC = () => {\n  const content = useIntlayer(\"server-component-example\"); // Create related content declaration\n\n  return (\n    <div>\n      <h2>{content.title}</h2>\n      <p>{content.content}</p>\n    </div>\n  );\n};\n```\n\n```jsx {1} fileName=\"src/components/ServerComponentExample.mjx\" codeFormat=\"esm\"\nimport { useIntlayer } from \"next-intlayer/server\";\n\nconst ServerComponentExample = () => {\n  const content = useIntlayer(\"server-component-example\"); // Create related content declaration\n\n  return (\n    <div>\n      <h2>{content.title}</h2>\n      <p>{content.content}</p>\n    </div>\n  );\n};\n```\n\n```jsx {1} fileName=\"src/components/ServerComponentExample.csx\" codeFormat=\"commonjs\"\nconst { useIntlayer } = require(\"next-intlayer/server\");\n\nconst ServerComponentExample = () => {\n  const content = useIntlayer(\"server-component-example\"); // Create related content declaration\n\n  return (\n    <div>\n      <h2>{content.title}</h2>\n      <p>{content.content}</p>\n    </div>\n  );\n};\n```\n\n> If you want to use your content in a `string` attribute, such as `alt`, `title`, `href`, `aria-label`, etc., you must call the value of the function, like:\n\n> ```jsx\n> <img src={content.image.src.value} alt={content.image.value} />\n> ```\n\n> To Learn more about the `useIntlayer` hook, refer to the [documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/next-intlayer/useIntlayer.md).\n\n### (Optional) Step 8: Internationalization of your metadata\n\nIn the case you want to internationalize your metadata, such as the title of your page, you can use the `generateMetadata` function provided by Next.js. Inside, you can retrieve the content from the `getIntlayer` function to translate your metadata.\n\n```typescript fileName=\"src/app/[locale]/metadata.content.ts\" contentDeclarationFormat=\"typescript\"\nimport { type Dictionary, t } from \"intlayer\";\nimport { Metadata } from \"next\";\n\nconst metadataContent = {\n  key: \"page-metadata\",\n  content: {\n    title: t({\n      en: \"Create Next App\",\n      fr: \"Créer une application Next.js\",\n      es: \"Crear una aplicación Next.js\",\n    }),\n    description: t({\n      en: \"Generated by create next app\",\n      fr: \"Généré par create next app\",\n      es: \"Generado por create next app\",\n    }),\n  },\n} satisfies Dictionary<Metadata>;\n\nexport default metadataContent;\n```\n\n```javascript fileName=\"src/app/[locale]/metadata.content.mjs\" contentDeclarationFormat=\"esm\"\nimport { t } from \"intlayer\";\n\n/** @type {import('intlayer').Dictionary<import('next').Metadata>} */\nconst metadataContent = {\n  key: \"page-metadata\",\n  content: {\n    title: t({\n      en: \"Create Next App\",\n      fr: \"Créer une application Next.js\",\n      es: \"Crear una aplicación Next.js\",\n    }),\n    description: t({\n      en: \"Generated by create next app\",\n      fr: \"Généré par create next app\",\n      es: \"Generado por create next app\",\n    }),\n  },\n};\n\nexport default metadataContent;\n```\n\n```javascript fileName=\"src/app/[locale]/metadata.content.cjs\" contentDeclarationFormat=\"commonjs\"\nconst { t } = require(\"intlayer\");\n\n/** @type {import('intlayer').Dictionary<import('next').Metadata>} */\nconst metadataContent = {\n  key: \"page-metadata\",\n  content: {\n    title: t({\n      en: \"Create Next App\",\n      fr: \"Créer une application Next.js\",\n      es: \"Crear una aplicación Next.js\",\n    }),\n    description: t({\n      en: \"Generated by create next app\",\n      fr: \"Généré par create next app\",\n      es: \"Generado por create next app\",\n    }),\n  },\n};\n\nmodule.exports = metadataContent;\n```\n\n```json fileName=\"src/app/[locale]/metadata.content.json\" contentDeclarationFormat=\"json\"\n{\n  \"key\": \"page-metadata\",\n  \"content\": {\n    \"title\": {\n      \"nodeType\": \"translation\",\n      \"translation\": {\n          \"en\": \"Preact logo\",\n          \"fr\": \"Logo Preact\",\n          \"es\": \"Logo Preact\",\n      },\n    },\n    \"description\": {\n      \"nodeType\": \"translation\",\n      \"translation\": {\n        \"en\": \"Generated by create next app\",\n        \"fr\": \"Généré par create next app\",\n        \"es\": \"Generado por create next app\",\n      },\n    },\n  },\n};\n```\n\n````typescript fileName=\"src/app/[locale]/layout.tsx or src/app/[locale]/page.tsx\" codeFormat=\"typescript\"\nimport { getIntlayer, getMultilingualUrls } from \"intlayer\";\nimport type { Metadata } from \"next\";\nimport type { LocalParams } from \"next-intlayer\";\n\nexport const generateMetadata = ({\n  params: { locale },\n}: LocalParams): Metadata => {\n  const metadata = getIntlayer(\"page-metadata\", locale);\n\n  /**\n   * Generates an object containing all url for each locale.\n   *\n   * Example:\n   * ```ts\n   *  getMultilingualUrls('/about');\n   *\n   *  // Returns\n   *  // {\n   *  //   en: '/about',\n   *  //   fr: '/fr/about',\n   *  //   es: '/es/about',\n   *  // }\n   * ```\n   */\n  const multilingualUrls = getMultilingualUrls(\"/\");\n  const localizedUrl =\n    multilingualUrls[locale as keyof typeof multilingualUrls];\n\n  return {\n    ...metadata,\n    alternates: {\n      canonical: localizedUrl,\n      languages: { ...multilingualUrls, \"x-default\": \"/\" },\n    },\n    openGraph: {\n      url: localizedUrl,\n    },\n  };\n};\n\n// ... Rest of the code\n````\n\n````javascript fileName=\"src/app/[locale]/layout.mjs or src/app/[locale]/page.mjs\" codeFormat=\"esm\"\nimport { getIntlayer, getMultilingualUrls } from \"intlayer\";\n\nexport const generateMetadata = ({ params: { locale } }) => {\n  const metadata = getIntlayer(\"page-metadata\", locale);\n\n  /**\n   * Generates an object containing all url for each locale.\n   *\n   * Example:\n   * ```ts\n   *  getMultilingualUrls('/about');\n   *\n   *  // Returns\n   *  // {\n   *  //   en: '/about',\n   *  //   fr: '/fr/about',\n   *  //   es: '/es/about'\n   *  // }\n   * ```\n   */\n  const multilingualUrls = getMultilingualUrls(\"/\");\n  const localizedUrl = multilingualUrls[locale];\n\n  return {\n    ...metadata,\n    alternates: {\n      canonical: localizedUrl,\n      languages: { ...multilingualUrls, \"x-default\": \"/\" },\n    },\n    openGraph: {\n      url: localizedUrl,\n    },\n  };\n};\n\n// ... Rest of the code\n````\n\n````javascript fileName=\"src/app/[locale]/layout.cjs or src/app/[locale]/page.cjs\" codeFormat=\"commonjs\"\nconst { getIntlayer, getMultilingualUrls } = require(\"intlayer\");\n\nconst generateMetadata = ({ params: { locale } }) => {\n  const metadata = getIntlayer(\"page-metadata\", locale);\n\n  /**\n   * Generates an object containing all url for each locale.\n   *\n   * Example:\n   * ```ts\n   *  getMultilingualUrls('/about');\n   *\n   *  // Returns\n   *  // {\n   *  //   en: '/about',\n   *  //   fr: '/fr/about',\n   *  //   es: '/es/about'\n   *  // }\n   * ```\n   */\n  const multilingualUrls = getMultilingualUrls(\"/\");\n  const localizedUrl = multilingualUrls[locale];\n\n  return {\n    ...metadata,\n    alternates: {\n      canonical: localizedUrl,\n      languages: { ...multilingualUrls, \"x-default\": \"/\" },\n    },\n    openGraph: {\n      url: localizedUrl,\n    },\n  };\n};\n\nmodule.exports = { generateMetadata };\n\n// ... Rest of the code\n````\n\n> Note that the `getIntlayer` function imported from `next-intlayer` returns your content wrapped in an `IntlayerNode`, allowing integration with the visual editor. In contrast, the `getIntlayer` function imported from `intlayer` returns your content directly without additional properties.\n\nAlternatively, you can use the `getTranslation` function to declare your metadata. However, using content declaration files is recommended to automate the translation of your metadata and externalize the content at some point.\n\n```typescript fileName=\"src/app/[locale]/layout.tsx or src/app/[locale]/page.tsx\" codeFormat=\"typescript\"\nimport {\n  type IConfigLocales,\n  getTranslation,\n  getMultilingualUrls,\n} from \"intlayer\";\nimport type { Metadata } from \"next\";\nimport type { LocalParams } from \"next-intlayer\";\n\nexport const generateMetadata = ({\n  params: { locale },\n}: LocalParams): Metadata => {\n  const t = <T>(content: IConfigLocales<T>) => getTranslation(content, locale);\n\n  return {\n    title: t<string>({\n      en: \"My title\",\n      fr: \"Mon titre\",\n      es: \"Mi título\",\n    }),\n    description: t({\n      en: \"My description\",\n      fr: \"Ma description\",\n      es: \"Mi descripción\",\n    }),\n  };\n};\n\n// ... Rest of the code\n```\n\n```javascript fileName=\"src/app/[locale]/layout.mjs or src/app/[locale]/page.mjs\" codeFormat=\"esm\"\nimport { getTranslation, getMultilingualUrls } from \"intlayer\";\n\nexport const generateMetadata = ({ params: { locale } }) => {\n  const t = (content) => getTranslation(content, locale);\n\n  return {\n    title: t({\n      en: \"My title\",\n      fr: \"Mon titre\",\n      es: \"Mi título\",\n    }),\n    description: t({\n      en: \"My description\",\n      fr: \"Ma description\",\n      es: \"Mi descripción\",\n    }),\n  };\n};\n\n// ... Rest of the code\n```\n\n```javascript fileName=\"src/app/[locale]/layout.cjs or src/app/[locale]/page.cjs\" codeFormat=\"commonjs\"\nconst { getTranslation, getMultilingualUrls } = require(\"intlayer\");\n\nconst generateMetadata = ({ params: { locale } }) => {\n  const t = (content) => getTranslation(content, locale);\n\n  return {\n    title: t({\n      en: \"My title\",\n      fr: \"Mon titre\",\n      es: \"Mi título\",\n    }),\n    description: t({\n      en: \"My description\",\n      fr: \"Ma description\",\n      es: \"Mi descripción\",\n    }),\n  };\n};\n\nmodule.exports = { generateMetadata };\n\n// ... Rest of the code\n```\n\n> Learn more about the metadata optimization [on the official Next.js documentation](https://nextjs.org/docs/app/building-your-application/optimizing/metadata).\n\n### (Optional) Step 9: Internationalization of your sitemap.xml and robots.txt\n\nTo internationalize your `sitemap.xml` and `robots.txt`, you can use the `getMultilingualUrls` function provided by Intlayer. This function allows you to generate multilingual URLs for your sitemap.\n\n```tsx fileName=\"src/app/sitemap.ts\"   codeFormat=\"typescript\"\nimport { getMultilingualUrls } from \"intlayer\";\nimport type { MetadataRoute } from \"next\";\n\nconst sitemap = (): MetadataRoute.Sitemap => [\n  {\n    url: \"https://example.com\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com\"),\n        \"x-default\": \"https://example.com\",\n      },\n    },\n  },\n  {\n    url: \"https://example.com/login\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com/login\"),\n        \"x-default\": \"https://example.com/login\",\n      },\n    },\n  },\n  {\n    url: \"https://example.com/register\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com/register\"),\n        \"x-default\": \"https://example.com/register\",\n      },\n    },\n  },\n];\n\nexport default sitemap;\n```\n\n```jsx fileName=\"src/app/sitemap.mjx\" codeFormat=\"esm\"\nimport { getMultilingualUrls } from \"intlayer\";\n\nconst sitemap = () => [\n  {\n    url: \"https://example.com\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com\"),\n        \"x-default\": \"https://example.com\",\n      },\n    },\n  },\n  {\n    url: \"https://example.com/login\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com/login\"),\n        \"x-default\": \"https://example.com/login\",\n      },\n    },\n  },\n  {\n    url: \"https://example.com/register\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com/register\"),\n        \"x-default\": \"https://example.com/register\",\n      },\n    },\n  },\n];\n\nexport default sitemap;\n```\n\n```jsx fileName=\"src/app/sitemap.csx\" codeFormat=\"commonjs\"\nconst { getMultilingualUrls } = require(\"intlayer\");\n\nconst sitemap = () => [\n  {\n    url: \"https://example.com\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com\"),\n        \"x-default\": \"https://example.com\",\n      },\n    },\n  },\n  {\n    url: \"https://example.com/login\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com/login\"),\n        \"x-default\": \"https://example.com/login\",\n      },\n    },\n  },\n  {\n    url: \"https://example.com/register\",\n    alternates: {\n      languages: {\n        ...getMultilingualUrls(\"https://example.com/register\"),\n        \"x-default\": \"https://example.com/register\",\n      },\n    },\n  },\n];\n\nmodule.exports = sitemap;\n```\n\n```tsx fileName=\"src/app/robots.ts\" codeFormat=\"typescript\"\nimport type { MetadataRoute } from \"next\";\nimport { getMultilingualUrls } from \"intlayer\";\n\nconst getAllMultilingualUrls = (urls: string[]) =>\n  urls.flatMap((url) => Object.values(getMultilingualUrls(url)) as string[]);\n\nconst robots = (): MetadataRoute.Robots => ({\n  rules: {\n    userAgent: \"*\",\n    allow: [\"/\"],\n    disallow: getAllMultilingualUrls([\"/login\", \"/register\"]),\n  },\n  host: \"https://example.com\",\n  sitemap: `https://example.com/sitemap.xml`,\n});\n\nexport default robots;\n```\n\n```jsx fileName=\"src/app/robots.mjx\" codeFormat=\"esm\"\nimport { getMultilingualUrls } from \"intlayer\";\n\nconst getAllMultilingualUrls = (urls) =>\n  urls.flatMap((url) => Object.values(getMultilingualUrls(url)));\n\nconst robots = () => ({\n  rules: {\n    userAgent: \"*\",\n    allow: [\"/\"],\n    disallow: getAllMultilingualUrls([\"/login\", \"/register\"]),\n  },\n  host: \"https://example.com\",\n  sitemap: `https://example.com/sitemap.xml`,\n});\n\nexport default robots;\n```\n\n```jsx fileName=\"src/app/robots.csx\" codeFormat=\"commonjs\"\nconst { getMultilingualUrls } = require(\"intlayer\");\n\nconst getAllMultilingualUrls = (urls) =>\n  urls.flatMap((url) => Object.values(getMultilingualUrls(url)));\n\nconst robots = () => ({\n  rules: {\n    userAgent: \"*\",\n    allow: [\"/\"],\n    disallow: getAllMultilingualUrls([\"/login\", \"/register\"]),\n  },\n  host: \"https://example.com\",\n  sitemap: `https://example.com/sitemap.xml`,\n});\n\nmodule.exports = robots;\n```\n\n> Learn more about the sitemap optimization [on the official Next.js documentation](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/sitemap). Learn more about the robots.txt optimization [on the official Next.js documentation](https://nextjs.org/docs/app/api-reference/file-conventions/metadata/robots).\n\n### (Optional) Step 10: Change the language of your content\n\nTo change the language of your content in Next.js, the recommended way is to use the `Link` component to redirect users to the appropriate localized page. The `Link` component enables prefetching of the page, which helps avoid a full page reload.\n\n```tsx fileName=\"src/components/LocaleSwitcher.tsx\" codeFormat=\"typescript\"\n\"use client\";\n\nimport {\n  Locales,\n  getHTMLTextDir,\n  getLocaleName,\n  getLocalizedUrl,\n} from \"intlayer\";\nimport { useLocale } from \"next-intlayer\";\nimport { type FC } from \"react\";\nimport Link from \"next/link\";\n\nconst LocaleSwitcher: FC = () => {\n  const { locale, pathWithoutLocale, availableLocales, setLocale } =\n    useLocale();\n\n  return (\n    <div>\n      <button popoverTarget=\"localePopover\">{getLocaleName(locale)}</button>\n      <div id=\"localePopover\" popover=\"auto\">\n        {availableLocales.map((localeItem) => (\n          <Link\n            href={getLocalizedUrl(pathWithoutLocale, localeItem)}\n            hrefLang={localeItem}\n            key={localeItem}\n            aria-current={locale === localeItem ? \"page\" : undefined}\n            onClick={() => setLocale(localeItem)}\n            replace // Will ensure that the \"go back\" browser button will redirect to the previous page\n          >\n            <span>\n              {/* Locale - e.g. FR */}\n              {localeItem}\n            </span>\n            <span>\n              {/* Language in its own Locale - e.g. Français */}\n              {getLocaleName(localeItem, locale)}\n            </span>\n            <span dir={getHTMLTextDir(localeItem)} lang={localeItem}>\n              {/* Language in current Locale - e.g. Francés with current locale set to Locales.SPANISH */}\n              {getLocaleName(localeItem)}\n            </span>\n            <span dir=\"ltr\" lang={Locales.ENGLISH}>\n              {/* Language in English - e.g. French */}\n              {getLocaleName(localeItem, Locales.ENGLISH)}\n            </span>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n};\n```\n\n```jsx fileName=\"src/components/LocaleSwitcher.msx\" codeFormat=\"esm\"\n\"use client\";\n\nimport {\n  Locales,\n  getHTMLTextDir,\n  getLocaleName,\n  getLocalizedUrl,\n} from \"intlayer\";\nimport { useLocale } from \"next-intlayer\";\nimport Link from \"next/link\";\n\nconst LocaleSwitcher = () => {\n  const { locale, pathWithoutLocale, availableLocales, setLocale } =\n    useLocale();\n\n  return (\n    <div>\n      <button popoverTarget=\"localePopover\">{getLocaleName(locale)}</button>\n      <div id=\"localePopover\" popover=\"auto\">\n        {availableLocales.map((localeItem) => (\n          <Link\n            href={getLocalizedUrl(pathWithoutLocale, localeItem)}\n            hrefLang={localeItem}\n            key={localeItem}\n            aria-current={locale === localeItem ? \"page\" : undefined}\n            onClick={() => setLocale(localeItem)}\n            replace // Will ensure that the \"go back\" browser button will redirect to the previous page\n          >\n            <span>\n              {/* Locale - e.g. FR */}\n              {localeItem}\n            </span>\n            <span>\n              {/* Language in its own Locale - e.g. Français */}\n              {getLocaleName(localeItem, locale)}\n            </span>\n            <span dir={getHTMLTextDir(localeItem)} lang={localeItem}>\n              {/* Language in current Locale - e.g. Francés with current locale set to Locales.SPANISH */}\n              {getLocaleName(localeItem)}\n            </span>\n            <span dir=\"ltr\" lang={Locales.ENGLISH}>\n              {/* Language in English - e.g. French */}\n              {getLocaleName(localeItem, Locales.ENGLISH)}\n            </span>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n};\n```\n\n```jsx fileName=\"src/components/LocaleSwitcher.csx\" codeFormat=\"commonjs\"\n\"use client\";\n\nconst {\n  Locales,\n  getHTMLTextDir,\n  getLocaleName,\n  getLocalizedUrl,\n} = require(\"intlayer\");\nconst { useLocale } = require(\"next-intlayer\");\nconst Link = require(\"next/link\");\n\nconst LocaleSwitcher = () => {\n  const { locale, pathWithoutLocale, availableLocales, setLocale } =\n    useLocale();\n\n  return (\n    <div>\n      <button popoverTarget=\"localePopover\">{getLocaleName(locale)}</button>\n      <div id=\"localePopover\" popover=\"auto\">\n        {availableLocales.map((localeItem) => (\n          <Link\n            href={getLocalizedUrl(pathWithoutLocale, localeItem)}\n            hrefLang={localeItem}\n            key={localeItem}\n            aria-current={locale === localeItem ? \"page\" : undefined}\n            onClick={() => setLocale(localeItem)}\n            replace // Will ensure that the \"go back\" browser button will redirect to the previous page\n          >\n            <span>\n              {/* Locale - e.g. FR */}\n              {localeItem}\n            </span>\n            <span>\n              {/* Language in its own Locale - e.g. Français */}\n              {getLocaleName(localeItem, locale)}\n            </span>\n            <span dir={getHTMLTextDir(localeItem)} lang={localeItem}>\n              {/* Language in current Locale - e.g. Francés with current locale set to Locales.SPANISH */}\n              {getLocaleName(localeItem)}\n            </span>\n            <span dir=\"ltr\" lang={Locales.ENGLISH}>\n              {/* Language in English - e.g. French */}\n              {getLocaleName(localeItem, Locales.ENGLISH)}\n            </span>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n};\n```\n\n> An alternative way is to use the `setLocale` function provided by the `useLocale` hook. This function will not allow prefetching the page. See the [`useLocale` hook documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/next-intlayer/useLocale.md) for more details.\n\n> You can also set a function in the `onLocaleChange` option to trigger a custom function when the locale changes.\n\n```tsx fileName=\"src/components/LocaleSwitcher.tsx\"\n\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useLocale } from \"next-intlayer\";\nimport { getLocalizedUrl } from \"intlayer\";\n\n// ... Rest of the code\n\nconst router = useRouter();\nconst { setLocale } = useLocale({\n  onLocaleChange: (locale) => {\n    router.push(getLocalizedUrl(pathWithoutLocale, locale));\n  },\n});\n\nreturn (\n  <button onClick={() => setLocale(Locales.FRENCH)}>Change to French</button>\n);\n```\n\n> Documentation references:\n>\n> - [`useLocale` hook](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/next-intlayer/useLocale.md)\n> - [`getLocaleName` hook](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/intlayer/getLocaleName.md)\n> - [`getLocalizedUrl` hook](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/intlayer/getLocalizedUrl.md)\n> - [`getHTMLTextDir` hook](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/intlayer/getHTMLTextDir.md)\n> - [`hrefLang` attribute](https://developers.google.com/search/docs/specialty/international/localized-versions?hl=fr)\n> - [`lang` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/lang)\n> - [`dir` attribute](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/dir)\n> - [`aria-current` attribute](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Attributes/aria-current)\n\n### (Optional) Step 11: Creating a Localized Link Component\n\nTo ensure that your application’s navigation respects the current locale, you can create a custom `Link` component. This component automatically prefixes internal URLs with the current language, so that. For example, when a French-speaking user clicks on a link to the \"About\" page, they are redirected to `/fr/about` instead of `/about`.\n\nThis behavior is useful for several reasons:\n\n- **SEO and User Experience**: Localized URLs help search engines index language-specific pages correctly and provide users with content in their preferred language.\n- **Consistency**: By using a localized link throughout your application, you guarantee that navigation stays within the current locale, preventing unexpected language switches.\n- **Maintainability**: Centralizing the localization logic in a single component simplifies the management of URLs, making your codebase easier to maintain and extend as your application grows.\n\nBelow is the implementation of a localized `Link` component in TypeScript:\n\n```tsx fileName=\"src/components/Link.tsx\" codeFormat=\"typescript\"\n\"use client\";\n\nimport { getLocalizedUrl } from \"intlayer\";\nimport NextLink, { type LinkProps as NextLinkProps } from \"next/link\";\nimport { useLocale } from \"next-intlayer\";\nimport { forwardRef, PropsWithChildren, type ForwardedRef } from \"react\";\n\n/**\n * Utility function to check whether a given URL is external.\n * If the URL starts with http:// or https://, it's considered external.\n */\nexport const checkIsExternalLink = (href?: string): boolean =>\n  /^https?:\\/\\//.test(href ?? \"\");\n\n/**\n * A custom Link component that adapts the href attribute based on the current locale.\n * For internal links, it uses `getLocalizedUrl` to prefix the URL with the locale (e.g., /fr/about).\n * This ensures that navigation stays within the same locale context.\n */\nexport const Link = forwardRef<\n  HTMLAnchorElement,\n  PropsWithChildren<NextLinkProps>\n>(({ href, children, ...props }, ref: ForwardedRef<HTMLAnchorElement>) => {\n  const { locale } = useLocale();\n  const isExternalLink = checkIsExternalLink(href.toString());\n\n  // If the link is internal and a valid href is provided, get the localized URL.\n  const hrefI18n: NextLinkProps[\"href\"] =\n    href && !isExternalLink ? getLocalizedUrl(href.toString(), locale) : href;\n\n  return (\n    <NextLink href={hrefI18n} ref={ref} {...props}>\n      {children}\n    </NextLink>\n  );\n});\n\nLink.displayName = \"Link\";\n```\n\n```jsx fileName=\"src/components/Link.mjx\" codeFormat=\"esm\"\n'use client';\n\nimport { getLocalizedUrl } from 'intlayer';\nimport NextLink, { type LinkProps as NextLinkProps } from 'next/link';\nimport { useLocale } from 'next-intlayer';\nimport { forwardRef, PropsWithChildren, type ForwardedRef } from 'react';\n\n/**\n * Utility function to check whether a given URL is external.\n * If the URL starts with http:// or https://, it's considered external.\n */\nexport const checkIsExternalLink = (href) =>\n  /^https?:\\/\\//.test(href ?? '');\n\n/**\n * A custom Link component that adapts the href attribute based on the current locale.\n * For internal links, it uses `getLocalizedUrl` to prefix the URL with the locale (e.g., /fr/about).\n * This ensures that navigation stays within the same locale context.\n */\nexport const Link = forwardRef(({ href, children, ...props }, ref) => {\n  const { locale } = useLocale();\n  const isExternalLink = checkIsExternalLink(href.toString());\n\n  // If the link is internal and a valid href is provided, get the localized URL.\n  const hrefI18n =\n    href && !isExternalLink ? getLocalizedUrl(href.toString(), locale) : href;\n\n  return (\n    <NextLink href={hrefI18n} ref={ref} {...props}>\n      {children}\n    </NextLink>\n  );\n});\n\nLink.displayName = 'Link';\n```\n\n```jsx fileName=\"src/components/Link.csx\" codeFormat=\"commonjs\"\n'use client';\n\nconst { getLocalizedUrl } = require(\"intlayer\");\nconst NextLink = require(\"next/link\");\nconst { useLocale } = require(\"next-intlayer\");\nconst { forwardRef } = require(\"react\");\n\n/**\n * Utility function to check whether a given URL is external.\n * If the URL starts with http:// or https://, it's considered external.\n */\nconst checkIsExternalLink = (href) =>\n  /^https?:\\/\\//.test(href ?? '');\n\n\nconst Link = forwardRef(({ href, children, ...props }, ref) => {\n  const { locale } = useLocale();\n  const isExternalLink = checkIsExternalLink(href.toString());\n\n  // If the link is internal and a valid href is provided, get the localized URL.\n  const hrefI18n: NextLinkProps['href'] =\n    href && !isExternalLink ? getLocalizedUrl(href.toString(), locale) : href;\n\n  return (\n    <NextLink href={hrefI18n} ref={ref} {...props}>\n      {children}\n    </NextLink>\n  );\n});\n\nLink.displayName = 'Link';\n```\n\n#### How It Works\n\n- **Detecting External Links**:  \n  The helper function `checkIsExternalLink` determines whether a URL is external. External links are left unchanged because they do not need localization.\n\n- **Retrieving the Current Locale**:  \n  The `useLocale` hook provides the current locale (e.g., `fr` for French).\n\n- **Localizing the URL**:  \n  For internal links (i.e., non-external), `getLocalizedUrl` is used to automatically prefix the URL with the current locale. This means that if your user is in French, passing `/about` as the `href` will transform it to `/fr/about`.\n\n- **Returning the Link**:  \n  The component returns an `<a>` element with the localized URL, ensuring that navigation is consistent with the locale.\n\nBy integrating this `Link` component across your application, you maintain a coherent and language-aware user experience while also benefitting from improved SEO and usability.\n\n### (Optional) Step 12: Get the current locale in Server Actions\n\nIf you need the active locale inside a Server Action (e.g., to localize emails or run locale-aware logic), call `getLocale` from `next-intlayer/server`:\n\n```tsx fileName=\"src/app/actions/getLocale.ts\" codeFormat=\"typescript\"\n\"use server\";\n\nimport { getLocale } from \"next-intlayer/server\";\n\nexport const myServerAction = async () => {\n  const locale = await getLocale();\n\n  // Do something with the locale\n};\n```\n\n> The `getLocale` function follows a cascading strategy to determine the user's locale:\n>\n> 1. First, it checks the request headers for a locale value that may have been set by the middleware\n> 2. If no locale is found in headers, it looks for a locale stored in cookies\n> 3. If no cookie is found, it attempts to detect the user's preferred language from their browser settings\n> 4. As a last resort, it falls back to the application's configured default locale\n>\n> This ensures the most appropriate locale is selected based on available context.\n\n### (Optional) Step 13: Optmize your bundle size\n\nWhen using `next-intlayer`, dictionaries are included in the bundle for every page by default. To optimize bundle size, Intlayer provides an optional SWC plugin that intelligently replace `useIntlayer` calls using macros. This ensures dictionaries are only included in bundles for pages that actually use them.\n\nTo enable this optimization, install the `@intlayer/swc` package. Once installed, `next-intlayer` will automatically detect and use the plugin:\n\n```bash packageManager=\"npm\"\nnpm install @intlayer/swc --save-dev\n```\n\n```bash packageManager=\"pnpm\"\npnpm add @intlayer/swc --save-dev\n```\n\n```bash packageManager=\"yarn\"\nyarn add @intlayer/swc --save-dev\n```\n\n```bash packageManager=\"bun\"\nbun add @intlayer/swc --dev\n```\n\n> Note: This optimization is only available for Next.js 13 and above.\n\n> Note: This package is not installed by default because SWC plugins are still experimental on Next.js. It may change in the future.\n\n> Note: If you set the option as `importMode: 'dynamic'` or `importMode: 'fetch'` (in the `dictionary` configuration), it will rely on Suspense, so you will have to wrap your `useIntlayer` calls in a `Suspense` boundary. That means, you will not be able to use the `useIntlayer` directly at the top level of your Page / Layout component.\n\n### Configure TypeScript\n\nIntlayer use module augmentation to get benefits of TypeScript and make your codebase stronger.\n\n![Autocompletion](https://github.com/aymericzip/intlayer/blob/main/docs/assets/autocompletion.png?raw=true)\n\n![Translation error](https://github.com/aymericzip/intlayer/blob/main/docs/assets/translation_error.png?raw=true)\n\nEnsure your TypeScript configuration includes the autogenerated types.\n\n```json5 fileName=\"tsconfig.json\"\n{\n  // ... Your existing TypeScript configurations\n  \"include\": [\n    // ... Your existing TypeScript configurations\n    \".intlayer/**/*.ts\", // Include the auto-generated types\n  ],\n}\n```\n\n### Git Configuration\n\nIt is recommended to ignore the files generated by Intlayer. This allows you to avoid committing them to your Git repository.\n\nTo do this, you can add the following instructions to your `.gitignore` file:\n\n```plaintext fileName=\".gitignore\"\n# Ignore the files generated by Intlayer\n.intlayer\n```\n\n### VS Code Extension\n\nTo improve your development experience with Intlayer, you can install the official **Intlayer VS Code Extension**.\n\n[Install from the VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=intlayer.intlayer-vs-code-extension)\n\nThis extension provides:\n\n- **Autocompletion** for translation keys.\n- **Real-time error detection** for missing translations.\n- **Inline previews** of translated content.\n- **Quick actions** to easily create and update translations.\n\nFor more details on how to use the extension, refer to the [Intlayer VS Code Extension documentation](https://intlayer.org/doc/vs-code-extension).\n\n### Go Further\n\nTo go further, you can implement the [visual editor](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_visual_editor.md) or externalize your content using the [CMS](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_CMS.md).\n",
  "createdAt": "2024-12-06",
  "updatedAt": "2025-12-30",
  "title": "Next.js i18n - How to translate your Next.js 14 app – guide 2026",
  "description": "Discover how to make your Next.js 14 App Router website multilingual. Follow the documentation to internationalize (i18n) and translate it.",
  "keywords": [
    "Internationalization",
    "Documentation",
    "Intlayer",
    "Next.js 14",
    "JavaScript",
    "React"
  ],
  "slugs": [
    "doc",
    "environment",
    "nextjs",
    "14"
  ],
  "applicationTemplate": "https://github.com/aymericzip/intlayer-next-14-template",
  "history": [
    {
      "version": "7.5.9",
      "date": "2025-12-30",
      "changes": "Add init command"
    },
    {
      "version": "6.2.0",
      "date": "2025-10-09",
      "changes": "Added docs for `useLocale` hook with `onLocaleChange` option"
    },
    {
      "version": "5.6.6",
      "date": "2025-10-02",
      "changes": "Added docs for `getLocale` function on server actions"
    },
    {
      "version": "5.6.2",
      "date": "2025-09-22",
      "changes": "Added docs for `multipleMiddlewares` helper"
    },
    {
      "version": "5.6.0",
      "date": "2025-07-06",
      "changes": "Transform `withIntlayer()` function to a promise based function"
    },
    {
      "version": "5.5.10",
      "date": "2025-06-29",
      "changes": "Init history"
    }
  ],
  "docKey": "./docs/en/intlayer_with_nextjs_14.md",
  "githubUrl": "https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_with_nextjs_14.md",
  "relativeUrl": "/doc/environment/nextjs/14",
  "url": "https://intlayer.org/doc/environment/nextjs/14"
}