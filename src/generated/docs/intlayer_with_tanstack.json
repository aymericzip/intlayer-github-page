{
  "id": "./docs/en/intlayer_with_tanstack.md",
  "content": "---\ncreatedAt: 2025-09-09\nupdatedAt: 2025-12-30\ntitle: Tanstack Start i18n - How to translate your Tanstack Start app – guide 2026\ndescription: Learn how to add internationalization (i18n) to your Tanstack Start application using Intlayer. Follow this comprehensive guide to make your app multilingual with locale-aware routing.\nkeywords:\n  - Internationalization\n  - Documentation\n  - Intlayer\n  - Tanstack Start\n  - React\n  - i18n\n  - TypeScript\n  - Locale Routing\nslugs:\n  - doc\n  - environment\n  - tanstack-start\napplicationTemplate: https://github.com/aymericzip/intlayer-tanstack-start-template\nyoutubeVideo: https://www.youtube.com/watch?v=_XTdKVWaeqg\nhistory:\n  - version: 7.5.9\n    date: 2025-12-30\n    changes: Add init command\n  - version: 7.4.0\n    date: 2025-12-11\n    changes: Introduce validatePrefix and add step 14: Handling 404 pages with localized routes.\n  - version: 7.3.9\n    date: 2025-12-05\n    changes: Add step 13: Retrieve the locale in your server actions (Optional)\n  - version: 7.2.3\n    date: 2025-11-18\n    changes: Add step 13: Adapt Nitro\n  - version: 7.1.0\n    date: 2025-11-17\n    changes: Fix prefix default by adding getPrefix function useLocalizedNavigate, LocaleSwitcher and LocalizedLink.\n  - version: 6.5.2\n    date: 2025-10-03\n    changes: Update doc\n  - version: 5.8.1\n    date: 2025-09-09\n    changes: Added for Tanstack Start\n---\n\n# Translate your Tanstack Start website using Intlayer | Internationalization (i18n)\n\n## Table of Contents\n\n<TOC/>\n\nThis guide demonstrates how to integrate **Intlayer** for seamless internationalization in Tanstack Start projects with locale-aware routing, TypeScript support, and modern development practices.\n\n## What is Intlayer?\n\n**Intlayer** is an innovative, open-source internationalization (i18n) library designed to simplify multilingual support in modern web applications.\n\nWith Intlayer, you can:\n\n- **Easily manage translations** using declarative dictionaries at the component level.\n- **Dynamically localize metadata**, routes, and content.\n- **Ensure TypeScript support** with autogenerated types, improving autocompletion and error detection.\n- **Benefit from advanced features**, like dynamic locale detection and switching.\n- **Enable locale-aware routing** with Tanstack Start's file-based routing system.\n\n---\n\n## Step-by-Step Guide to Set Up Intlayer in a Tanstack Start Application\n\n<Tabs defaultTab=\"video\">\n  <Tab label=\"Video\" value=\"video\">\n  \n<iframe title=\"The best i18n solution for Tanstack Start? Discover Intlayer\" class=\"m-auto aspect-16/9 w-full overflow-hidden rounded-lg border-0\" allow=\"autoplay; gyroscope;\" loading=\"lazy\" width=\"1080\" height=\"auto\" src=\"https://www.youtube.com/embed/_XTdKVWaeqg?autoplay=0&amp;origin=http://intlayer.org&amp;controls=0&amp;rel=1\"/>\n\n  </Tab>\n  <Tab label=\"Code\" value=\"code\">\n\n<iframe\n  src=\"https://stackblitz.com/github/aymericzip/intlayer-tanstack-start-template?embed=1&ctl=1&file=intlayer.config.ts\"\n  className=\"m-auto overflow-hidden rounded-lg border-0 max-md:size-full max-md:h-[700px] md:aspect-16/9 md:w-full\"\n  title=\"Demo CodeSandbox - How to Internationalize your application using Intlayer\"\n  sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n  loading=\"lazy\"\n/>\n\n  </Tab>\n</Tabs>\n\nSee [Application Template](https://github.com/aymericzip/intlayer-tanstack-start-template) on GitHub.\n\n### Step 1: Create Project\n\nStart by creating a new TanStack Start project by following the [Start new project](https://tanstack.com/start/latest/docs/framework/react/quick-start) guide on the TanStack Start website.\n\n### Step 2: Install Intlayer Packages\n\nInstall the necessary packages using your preferred package manager:\n\n```bash packageManager=\"npm\"\nnpm install intlayer react-intlayer\nnpm install vite-intlayer --save-dev\nnpx intlayer init\n```\n\n```bash packageManager=\"pnpm\"\npnpm add intlayer react-intlayer\npnpm add vite-intlayer --save-dev\npnpm intlayer init\n```\n\n```bash packageManager=\"yarn\"\nyarn add intlayer react-intlayer\nyarn add vite-intlayer --save-dev\nyarn intlayer init\n```\n\n```bash packageManager=\"bun\"\nbun add intlayer react-intlayer\nbun add vite-intlayer --dev\nbunx intlayer init\n```\n\n- **intlayer**\n\n  The core package that provides internationalization tools for configuration management, translation, [content declaration](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/dictionary/content_file.md), transpilation, and [CLI commands](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/cli/index.md).\n\n- **react-intlayer**\n  The package that integrates Intlayer with React application. It provides context providers and hooks for React internationalization.\n\n- **vite-intlayer**\n  Includes the Vite plugin for integrating Intlayer with the [Vite bundler](https://vite.dev/guide/why.html#why-bundle-for-production), as well as middleware for detecting the user's preferred locale, managing cookies, and handling URL redirection.\n\n### Step 3: Configuration of your project\n\nCreate a config file to configure the languages of your application:\n\n```typescript fileName=\"intlayer.config.ts\"\nimport type { IntlayerConfig } from \"intlayer\";\n\nimport { Locales } from \"intlayer\";\n\nconst config: IntlayerConfig = {\n  internationalization: {\n    defaultLocale: Locales.ENGLISH,\n    locales: [Locales.ENGLISH, Locales.FRENCH, Locales.SPANISH],\n  },\n};\n\nexport default config;\n```\n\n> Through this configuration file, you can set up localized URLs, middleware redirection, cookie names, the location and extension of your content declarations, disable Intlayer logs in the console, and more. For a complete list of available parameters, refer to the [configuration documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/configuration.md).\n\n### Step 4: Integrate Intlayer in Your Vite Configuration\n\nAdd the intlayer plugin into your configuration:\n\n```typescript fileName=\"vite.config.ts\"\nimport { tanstackStart } from \"@tanstack/react-start/plugin/vite\";\nimport viteReact from \"@vitejs/plugin-react\";\nimport { nitro } from \"nitro/vite\";\nimport { defineConfig } from \"vite\";\nimport { intlayer } from \"vite-intlayer\";\nimport viteTsConfigPaths from \"vite-tsconfig-paths\";\n\nconst config = defineConfig({\n  plugins: [\n    nitro(),\n    viteTsConfigPaths({\n      projects: [\"./tsconfig.json\"],\n    }),\n    intlayer(),\n    tanstackStart({\n      router: {\n        routeFileIgnorePattern:\n          \".content.(ts|tsx|js|mjs|cjs|jsx|json|jsonc|json5)$\",\n      },\n    }),\n    viteReact(),\n  ],\n});\n\nexport default config;\n```\n\n> The `intlayer()` Vite plugin is used to integrate Intlayer with Vite. It ensures the building of content declaration files and monitors them in development mode. It defines Intlayer environment variables within the Vite application. Additionally, it provides aliases to optimize performance.\n\n### Step 5: Create Root Layout\n\nConfigure your root layout to support internationalization by using `useMatches` to detect the current locale and setting the `lang` and `dir` attributes on the `html` tag.\n\n```tsx fileName=\"src/routes/__root.tsx\"\nimport {\n  createRootRouteWithContext,\n  HeadContent,\n  Outlet,\n  Scripts,\n  useMatches,\n} from \"@tanstack/react-router\";\nimport { defaultLocale, getHTMLTextDir } from \"intlayer\";\nimport { type ReactNode } from \"react\";\nimport { IntlayerProvider } from \"react-intlayer\";\n\nexport const Route = createRootRouteWithContext<{}>()({\n  shellComponent: RootDocument,\n});\n\nfunction RootDocument({ children }: { children: ReactNode }) {\n  const matches = useMatches();\n\n  // Try to find locale in params of any active match\n  // This assumes you use the dynamic segment \"/{-$locale}\" in your route tree\n  const localeRoute = matches.find((match) => match.routeId === \"/{-$locale}\");\n  const locale = localeRoute?.params?.locale ?? defaultLocale;\n\n  return (\n    <html dir={getHTMLTextDir(locale)} lang={locale}>\n      <head>\n        <HeadContent />\n      </head>\n      <body>\n        <IntlayerProvider locale={locale}>{children}</IntlayerProvider>\n        <Scripts />\n      </body>\n    </html>\n  );\n}\n```\n\n### Step 6: Create Locale Layout\n\nCreate a layout that handles the locale prefix and performs validation.\n\n```tsx fileName=\"src/routes/{-$locale}/route.tsx\"\nimport { createFileRoute, Outlet, redirect } from \"@tanstack/react-router\";\nimport { validatePrefix } from \"intlayer\";\n\nexport const Route = createFileRoute(\"/{-$locale}\")({\n  beforeLoad: ({ params }) => {\n    const localeParam = params.locale;\n\n    // Validate the locale prefix\n    const { isValid, localePrefix } = validatePrefix(localeParam);\n\n    if (!isValid) {\n      throw redirect({\n        to: \"/{-$locale}/404\",\n        params: { locale: localePrefix },\n      });\n    }\n  },\n  component: Outlet,\n});\n```\n\n> Here, `{-$locale}` is a dynamic route parameter that gets replaced with the current locale. This notation makes the slot optional, allowing it to work with routing modes such as `'prefix-no-default'` etc.\n\n> Be aware that this slot may cause issues if you use multiple dynamic segments in the same route (e.g., `/{-$locale}/other-path/$anotherDynamicPath/...`).\n> For the `'prefix-all'` mode, you may prefer switching the slot to `$locale` instead.\n> For the `'no-prefix'` or `'search-params'` mode, you can remove the slot entirely.\n\n### Step 7: Declare Your Content\n\nCreate and manage your content declarations to store translations:\n\n```tsx fileName=\"src/contents/page.content.ts\"\nimport type { Dictionary } from \"intlayer\";\n\nimport { t } from \"intlayer\";\n\nconst appContent = {\n  content: {\n    links: {\n      about: t({\n        en: \"About\",\n        es: \"Acerca de\",\n        fr: \"À propos\",\n      }),\n      home: t({\n        en: \"Home\",\n        es: \"Inicio\",\n        fr: \"Accueil\",\n      }),\n    },\n    meta: {\n      title: t({\n        en: \"Welcome to Intlayer + TanStack Router\",\n        es: \"Bienvenido a Intlayer + TanStack Router\",\n        fr: \"Bienvenue à Intlayer + TanStack Router\",\n      }),\n      description: t({\n        en: \"This is an example of using Intlayer with TanStack Router\",\n        es: \"Este es un ejemplo de uso de Intlayer con TanStack Router\",\n        fr: \"Ceci est un exemple d'utilisation d'Intlayer avec TanStack Router\",\n      }),\n    },\n  },\n  key: \"app\",\n} satisfies Dictionary;\n\nexport default appContent;\n```\n\n> Your content declarations can be defined anywhere in your application as soon they are included into the `contentDir` directory (by default, `./app`). And match the content declaration file extension (by default, `.content.{json,ts,tsx,js,jsx,mjs,cjs}`).\n\n> For more details, refer to the [content declaration documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/dictionary/content_file.md).\n\n### Step 7: Create Locale-Aware Components and Hooks\n\nCreate a `LocalizedLink` component for locale-aware navigation:\n\n```tsx fileName=\"src/components/localized-link.tsx\"\nimport type { FC } from \"react\";\n\nimport { Link, type LinkComponentProps } from \"@tanstack/react-router\";\nimport { useLocale } from \"react-intlayer\";\nimport { getPrefix } from \"intlayer\";\n\nexport const LOCALE_ROUTE = \"{-$locale}\" as const;\n\n// Main utility\nexport type RemoveLocaleParam<T> = T extends string\n  ? RemoveLocaleFromString<T>\n  : T;\n\nexport type To = RemoveLocaleParam<LinkComponentProps[\"to\"]>;\n\ntype CollapseDoubleSlashes<S extends string> =\n  S extends `${infer H}//${infer T}` ? CollapseDoubleSlashes<`${H}/${T}`> : S;\n\ntype LocalizedLinkProps = {\n  to?: To;\n} & Omit<LinkComponentProps, \"to\">;\n\n// Helpers\ntype RemoveAll<\n  S extends string,\n  Sub extends string,\n> = S extends `${infer H}${Sub}${infer T}` ? RemoveAll<`${H}${T}`, Sub> : S;\n\ntype RemoveLocaleFromString<S extends string> = CollapseDoubleSlashes<\n  RemoveAll<S, typeof LOCALE_ROUTE>\n>;\n\nexport const LocalizedLink: FC<LocalizedLinkProps> = (props) => {\n  const { locale } = useLocale();\n  const { localePrefix } = getPrefix(locale);\n\n  return (\n    <Link\n      {...props}\n      params={{\n        locale: localePrefix,\n        ...(typeof props?.params === \"object\" ? props?.params : {}),\n      }}\n      to={`/${LOCALE_ROUTE}${props.to}` as LinkComponentProps[\"to\"]}\n    />\n  );\n};\n```\n\nThis component has two objectives:\n\n- Remove the unnecessary `{-$locale}` prefix from the URL.\n- Inject the locale parameter into the URL to ensure the user is directly redirected to the localized route.\n\nThen we can create a `useLocalizedNavigate` hook for programmatic navigation:\n\n```tsx fileName=\"src/hooks/useLocalizedNavigate.tsx\"\nimport { useNavigate } from \"@tanstack/react-router\";\nimport { getPrefix } from \"intlayer\";\nimport { useLocale } from \"react-intlayer\";\nimport { LOCALE_ROUTE } from \"@/components/localized-link\";\nimport type { FileRouteTypes } from \"@/routeTree.gen\";\n\ntype StripLocalePrefix<T extends string> = T extends\n  | `/${typeof LOCALE_ROUTE}`\n  | `/${typeof LOCALE_ROUTE}/`\n  ? \"/\"\n  : T extends `/${typeof LOCALE_ROUTE}/${infer Rest}`\n    ? `/${Rest}`\n    : never;\n\ntype LocalizedTo = StripLocalePrefix<FileRouteTypes[\"to\"]>;\n\ntype LocalizedNavigate = {\n  (to: LocalizedTo): ReturnType<ReturnType<typeof useNavigate>>;\n  (\n    opts: { to: LocalizedTo } & Record<string, unknown>\n  ): ReturnType<ReturnType<typeof useNavigate>>;\n};\n\nexport const useLocalizedNavigate = () => {\n  const navigate = useNavigate();\n\n  const { locale } = useLocale();\n\n  const localizedNavigate: LocalizedNavigate = (args: any) => {\n    const { localePrefix } = getPrefix(locale);\n\n    if (typeof args === \"string\") {\n      return navigate({\n        to: `/${LOCALE_ROUTE}${args}`,\n        params: { locale: localePrefix },\n      });\n    }\n\n    const { to, ...rest } = args;\n\n    const localizedTo = `/${LOCALE_ROUTE}${to}` as any;\n\n    return navigate({\n      to: localizedTo,\n      params: { locale: localePrefix, ...rest } as any,\n    });\n  };\n\n  return localizedNavigate;\n};\n```\n\n### Step 8: Utilize Intlayer in Your Pages\n\nAccess your content dictionaries throughout your application:\n\n#### Localized Home Page\n\n```tsx fileName=\"src/routes/{-$locale}/index.tsx\"\nimport { createFileRoute } from \"@tanstack/react-router\";\nimport { getIntlayer } from \"intlayer\";\nimport { useIntlayer } from \"react-intlayer\";\n\nimport LocaleSwitcher from \"@/components/locale-switcher\";\nimport { LocalizedLink } from \"@/components/localized-link\";\nimport { useLocalizedNavigate } from \"@/hooks/useLocalizedNavigate\";\n\nexport const Route = createFileRoute(\"/{-$locale}/\")({\n  component: RouteComponent,\n  head: ({ params }) => {\n    const { locale } = params;\n    const metaContent = getIntlayer(\"app\", locale);\n\n    return {\n      meta: [\n        { title: metaContent.title },\n        { content: metaContent.meta.description, name: \"description\" },\n      ],\n    };\n  },\n});\n\nfunction RouteComponent() {\n  const content = useIntlayer(\"app\");\n  const navigate = useLocalizedNavigate();\n\n  return (\n    <div>\n      <div>\n        {content.title}\n        <LocaleSwitcher />\n        <div>\n          <LocalizedLink to=\"/\">{content.links.home}</LocalizedLink>\n          <LocalizedLink to=\"/about\">{content.links.about}</LocalizedLink>\n        </div>\n        <div>\n          <button onClick={() => navigate({ to: \"/\" })}>\n            {content.links.home}\n          </button>\n          <button onClick={() => navigate({ to: \"/about\" })}>\n            {content.links.about}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n```\n\n> To Learn more about the `useIntlayer` hook, refer to the [documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/react-intlayer/useIntlayer.md).\n\n### Step 9: Create a Locale Switcher Component\n\nCreate a component to allow users to change languages:\n\n```tsx fileName=\"src/components/locale-switcher.tsx\"\nimport { useLocation } from \"@tanstack/react-router\";\nimport {\n  getHTMLTextDir,\n  getLocaleName,\n  getPathWithoutLocale,\n  getPrefix,\n  Locales,\n} from \"intlayer\";\nimport type { FC } from \"react\";\nimport { useLocale } from \"react-intlayer\";\n\nimport { LocalizedLink, type To } from \"./localized-link\";\n\nexport const LocaleSwitcher: FC = () => {\n  const { pathname } = useLocation();\n\n  const { availableLocales, locale, setLocale } = useLocale();\n\n  const pathWithoutLocale = getPathWithoutLocale(pathname);\n\n  return (\n    <ol>\n      {availableLocales.map((localeEl) => (\n        <li key={localeEl}>\n          <LocalizedLink\n            aria-current={localeEl === locale ? \"page\" : undefined}\n            onClick={() => setLocale(localeEl)}\n            params={{ locale: getPrefix(localeEl).localePrefix }}\n            to={pathWithoutLocale as To}\n          >\n            <span>\n              {/* Locale - e.g. FR */}\n              {localeEl}\n            </span>\n            <span>\n              {/* Language in its own Locale - e.g. Français */}\n              {getLocaleName(localeEl, locale)}\n            </span>\n            <span dir={getHTMLTextDir(localeEl)} lang={localeEl}>\n              {/* Language in current Locale - e.g. Francés with current locale set to Locales.SPANISH */}\n              {getLocaleName(localeEl)}\n            </span>\n            <span dir=\"ltr\" lang={Locales.ENGLISH}>\n              {/* Language in English - e.g. French */}\n              {getLocaleName(localeEl, Locales.ENGLISH)}\n            </span>\n          </LocalizedLink>\n        </li>\n      ))}\n    </ol>\n  );\n};\n```\n\n> To Learn more about the `useLocale` hook, refer to the [documentation](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/react-intlayer/useLocale.md).\n\n### Step 10: HTML Attributes Management\n\nAs seen in Step 5, you can manage the `lang` and `dir` attributes of the `html` tag using `useMatches` in your root component. This ensures that the correct attributes are set on the server and client.\n\n```tsx fileName=\"src/routes/__root.tsx\"\nfunction RootDocument({ children }: { children: ReactNode }) {\n  const matches = useMatches();\n\n  // Try to find locale in params of any active match\n  const localeRoute = matches.find((match) => match.routeId === \"/{-$locale}\");\n  const locale = localeRoute?.params?.locale ?? defaultLocale;\n\n  return (\n    <html dir={getHTMLTextDir(locale)} lang={locale}>\n      {/* ... */}\n    </html>\n  );\n}\n```\n\n---\n\n### Step 11: Add middleware (Optional)\n\nYou can also use the `intlayerProxy` to add server-side routing to your application. This plugin will automatically detect the current locale based on the URL and set the appropriate locale cookie. If no locale is specified, the plugin will determine the most appropriate locale based on the user's browser language preferences. If no locale is detected, it will redirect to the default locale.\n\n> Note that to use the `intlayerProxy` in production, you need to switch the `vite-intlayer` package from `devDependencies` to `dependencies`.\n\n```typescript {7,14-17} fileName=\"vite.config.ts\"\nimport { tanstackStart } from \"@tanstack/react-start/plugin/vite\";\nimport viteReact from \"@vitejs/plugin-react\";\nimport { nitro } from \"nitro/vite\";\nimport { defineConfig } from \"vite\";\nimport { intlayer, intlayerProxy } from \"vite-intlayer\";\nimport viteTsConfigPaths from \"vite-tsconfig-paths\";\n\nexport default defineConfig({\n  plugins: [\n    intlayerProxy(), // The proxy should be placed before server if you use Nitro\n    nitro(),\n    viteTsConfigPaths({\n      projects: [\"./tsconfig.json\"],\n    }),\n    intlayer(),\n    tanstackStart({\n      router: {\n        routeFileIgnorePattern:\n          \".content.(ts|tsx|js|mjs|cjs|jsx|json|jsonc|json5)$\",\n      },\n    }),\n    viteReact(),\n  ],\n});\n```\n\n---\n\n### Step 12: Internationalize your Metadata (Optional)\n\nYou can also use the `getIntlayer` hook to access your content dictionaries throughout your application:\n\n```tsx fileName=\"src/routes/{-$locale}/index.tsx\"\nimport { createFileRoute } from \"@tanstack/react-router\";\nimport { getIntlayer } from \"intlayer\";\n\nexport const Route = createFileRoute(\"/{-$locale}/\")({\n  component: RouteComponent,\n  head: ({ params }) => {\n    const { locale } = params;\n    const metaContent = getIntlayer(\"page-metadata\", locale);\n\n    return {\n      meta: [\n        { title: metaContent.title },\n        { content: metaContent.description, name: \"description\" },\n      ],\n    };\n  },\n});\n```\n\n---\n\n### Step 13: Retrieve the locale in your server actions (Optional)\n\nYou may want to access the current locale from inside your server actions or API endpoints.\nYou can do this using the `getLocale` helper from `intlayer`.\n\nHere's an example using TanStack Start's server functions:\n\n```tsx fileName=\"src/routes/{-$locale}/index.tsx\"\nimport { createServerFn } from \"@tanstack/react-start\";\nimport {\n  getRequestHeader,\n  getRequestHeaders,\n} from \"@tanstack/react-start/server\";\nimport { getCookie, getIntlayer, getLocale } from \"intlayer\";\n\nexport const getLocaleServer = createServerFn().handler(async () => {\n  const locale = await getLocale({\n    // Get the cookie from the request (default: 'INTLAYER_LOCALE')\n    getCookie: (name) => {\n      const cookieString = getRequestHeader(\"cookie\");\n\n      return getCookie(name, cookieString);\n    },\n    // Get the header from the request (default: 'x-intlayer-locale')\n    // Fallback using Accept-Language negotiation\n    getHeader: (name) => getRequestHeader(name),\n  });\n\n  // Retrieve some content using getIntlayer()\n  const content = getIntlayer(\"app\", locale);\n\n  return { locale, content };\n});\n```\n\n---\n\n### Step 14: Manage not found pages (Optional)\n\nWhen a user visits a non-existing page, you can display a custom not found page and the locale prefix may impact the way the not found page is triggered.\n\n#### Understanding TanStack Router's 404 Handling with Locale Prefixes\n\nIn TanStack Router, handling 404 pages with localized routes requires a multi-layered approach:\n\n1. **Dedicated 404 route**: A specific route to display the 404 UI\n2. **Route-level validation**: Validates locale prefixes and redirects invalid ones to 404\n3. **Catch-all route**: Captures any unmatched paths within the locale segment\n\n```tsx fileName=\"src/routes/{-$locale}/404.tsx\"\nimport { createFileRoute } from \"@tanstack/react-router\";\n\n// This creates a dedicated /[locale]/404 route\n// It's used both as a direct route and imported as a component in other files\nexport const Route = createFileRoute(\"/{-$locale}/404\")({\n  component: NotFoundComponent,\n});\n\n// Exported separately so it can be reused in notFoundComponent and catch-all routes\nexport function NotFoundComponent() {\n  return (\n    <div>\n      <h1>404</h1>\n    </div>\n  );\n}\n```\n\n```tsx fileName=\"src/routes/{-$locale}/route.tsx\"\nimport { createFileRoute, Outlet, redirect } from \"@tanstack/react-router\";\nimport { validatePrefix } from \"intlayer\";\nimport { NotFoundComponent } from \"./404\";\n\nexport const Route = createFileRoute(\"/{-$locale}\")({\n  // beforeLoad runs before the route renders (on both server and client)\n  // It's the ideal place to validate the locale prefix\n  beforeLoad: ({ params }) => {\n    const localeParam = params.locale;\n\n    // validatePrefix checks if the locale is valid according to your intlayer config\n    const { isValid, localePrefix } = validatePrefix(localeParam);\n\n    if (!isValid) {\n      // Invalid locale prefix - redirect to the 404 page with a valid locale prefix\n      throw redirect({\n        to: \"/{-$locale}/404\",\n        params: { locale: localePrefix },\n      });\n    }\n  },\n  component: Outlet,\n  // notFoundComponent is called when a child route doesn't exist\n  // e.g., /en/non-existent-page triggers this within the /en layout\n  notFoundComponent: NotFoundComponent,\n});\n```\n\n```tsx fileName=\"src/routes/{-$locale}/$.tsx\"\nimport { createFileRoute } from \"@tanstack/react-router\";\n\nimport { NotFoundComponent } from \"./404\";\n\n// The $ (splat/catch-all) route matches any path that doesn't match other routes\n// e.g., /en/some/deeply/nested/invalid/path\n// This ensures ALL unmatched paths within a locale show the 404 page\n// Without this, unmatched deep paths might show a blank page or error\nexport const Route = createFileRoute(\"/{-$locale}/$\")({\n  component: NotFoundComponent,\n});\n```\n\n---\n\n### Step 15: Configure TypeScript (Optional)\n\nIntlayer uses module augmentation to get benefits of TypeScript and make your codebase stronger.\n\nEnsure your TypeScript configuration includes the autogenerated types:\n\n```json5 fileName=\"tsconfig.json\"\n{\n  // ... your existing configurations\n  include: [\n    // ... your existing includes\n    \".intlayer/**/*.ts\", // Include the auto-generated types\n  ],\n}\n```\n\n---\n\n### Git Configuration\n\nIt is recommended to ignore the files generated by Intlayer. This allows you to avoid committing them to your Git repository.\n\nTo do this, you can add the following instructions to your `.gitignore` file:\n\n```plaintext fileName=\".gitignore\"\n# Ignore the files generated by Intlayer\n.intlayer\n```\n\n---\n\n## VS Code Extension\n\nTo improve your development experience with Intlayer, you can install the official **Intlayer VS Code Extension**.\n\n[Install from the VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=intlayer.intlayer-vs-code-extension)\n\nThis extension provides:\n\n- **Autocompletion** for translation keys.\n- **Real-time error detection** for missing translations.\n- **Inline previews** of translated content.\n- **Quick actions** to easily create and update translations.\n\nFor more details on how to use the extension, refer to the [Intlayer VS Code Extension documentation](https://intlayer.org/doc/vs-code-extension).\n\n---\n\n## Go Further\n\nTo go further, you can implement the [visual editor](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_visual_editor.md) or externalize your content using the [CMS](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_CMS.md).\n\n---\n\n## Documentation References\n\n- [Intlayer Documentation](https://intlayer.org)\n- [Tanstack Start Documentation](https://reactrouter.com/)\n- [useIntlayer hook](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/react-intlayer/useIntlayer.md)\n- [useLocale hook](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/packages/react-intlayer/useLocale.md)\n- [Content Declaration](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/dictionary/content_file.md)\n- [Configuration](https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/configuration.md)\n",
  "createdAt": "2025-09-09",
  "updatedAt": "2025-12-30",
  "title": "Tanstack Start i18n - How to translate your Tanstack Start app – guide 2026",
  "description": "Learn how to add internationalization (i18n) to your Tanstack Start application using Intlayer. Follow this comprehensive guide to make your app multilingual with locale-aware routing.",
  "keywords": [
    "Internationalization",
    "Documentation",
    "Intlayer",
    "Tanstack Start",
    "React",
    "i18n",
    "TypeScript",
    "Locale Routing"
  ],
  "slugs": [
    "doc",
    "environment",
    "tanstack-start"
  ],
  "applicationTemplate": "https://github.com/aymericzip/intlayer-tanstack-start-template",
  "youtubeVideo": "https://www.youtube.com/watch?v=_XTdKVWaeqg",
  "history": [
    {
      "version": "7.5.9",
      "date": "2025-12-30",
      "changes": "Add init command"
    },
    {
      "version": "7.4.0",
      "date": "2025-12-11",
      "changes": "Introduce validatePrefix and add step 14: Handling 404 pages with localized routes."
    },
    {
      "version": "7.3.9",
      "date": "2025-12-05",
      "changes": "Add step 13: Retrieve the locale in your server actions (Optional)"
    },
    {
      "version": "7.2.3",
      "date": "2025-11-18",
      "changes": "Add step 13: Adapt Nitro"
    },
    {
      "version": "7.1.0",
      "date": "2025-11-17",
      "changes": "Fix prefix default by adding getPrefix function useLocalizedNavigate, LocaleSwitcher and LocalizedLink."
    },
    {
      "version": "6.5.2",
      "date": "2025-10-03",
      "changes": "Update doc"
    },
    {
      "version": "5.8.1",
      "date": "2025-09-09",
      "changes": "Added for Tanstack Start"
    }
  ],
  "docKey": "./docs/en/intlayer_with_tanstack.md",
  "githubUrl": "https://github.com/aymericzip/intlayer/blob/main/docs/docs/en/intlayer_with_tanstack.md",
  "relativeUrl": "/doc/environment/tanstack-start",
  "url": "https://intlayer.org/doc/environment/tanstack-start"
}